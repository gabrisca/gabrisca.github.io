"use strict";(self["webpackChunkgabrisca"]=self["webpackChunkgabrisca"]||[]).push([[802],{12802:function(t,e,a){a.r(e),a.d(e,{default:function(){return q}});var l=function(){var t=this,e=t._self._c;return e("div",[e("header-bar"),e("b-container",[e("b-row",{staticClass:"mt-5"},[e("data-table")],1)],1)],1)},s=[],r=function(){var t=this,e=t._self._c;return e("b-navbar",{staticStyle:{height:"65px"},attrs:{toggleable:"lg",type:"dark",variant:"primary"}},[e("b-container",[e("b-row",{staticClass:"text-white"},[e("b-col",[e("i",{staticClass:"fa-solid fa-lock-open fa-lg"})]),e("b-col",[e("span",{staticClass:"h3"},[t._v("H!STOIRE")])])],1)],1)],1)},i=[],o={name:"HeaderBar"},c=o,n=a(1001),u=(0,n.Z)(c,r,i,!1,null,null,null),d=u.exports,b=function(){var t=this,e=t._self._c;return e("div",[e("b-row",[e("b-alert",{attrs:{variant:"success",dismissible:""},model:{value:t.showSuccessAlertCreate,callback:function(e){t.showSuccessAlertCreate=e},expression:"showSuccessAlertCreate"}},[t._v(" "+t._s(t.alertMessage)+" ")])],1),e("b-row",[e("b-alert",{attrs:{variant:"warning",dismissible:""},model:{value:t.showSuccessAlertEdit,callback:function(e){t.showSuccessAlertEdit=e},expression:"showSuccessAlertEdit"}},[t._v(" "+t._s(t.alertMessage)+" ")])],1),e("b-row",[e("b-alert",{attrs:{variant:"danger",dismissible:""},model:{value:t.showSuccessAlertDelete,callback:function(e){t.showSuccessAlertDelete=e},expression:"showSuccessAlertDelete"}},[t._v(" "+t._s(t.alertMessage)+" ")])],1),e("b-row",[e("article-overview",{attrs:{totalArticles:t.numberOfArticles,activeArticles:t.activeArticles},on:{totalArticlesIsActive:t.setFilterTotalIsActive,activeArticleIsActive:t.setFilterActiveIsActive}})],1),e("b-row",{staticClass:"mt-3"},[e("b-card",[e("b-row",{attrs:{"align-h":"between"}},[e("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"6"}},[e("h3",[t._v(t._s(t.tableHeader))])]),e("b-col",{staticClass:"d-flex justify-content-center",attrs:{cols:"6"}},[e("b-row",[e("b-col",[e("b-button",{attrs:{variant:"primary",id:"show-btn"},on:{click:t.showCreateModal}},[e("b-icon-plus",{staticClass:"text-white"}),e("span",{staticClass:"h6 text-white"},[t._v("New Article")])],1)],1)],1)],1)],1),e("b-row",{staticClass:"mt-3"},[e("b-table",{staticClass:"text-center",attrs:{striped:"",hover:"",items:t.items,fields:t.fields},scopedSlots:t._u([{key:"cell(id)",fn:function(e){return[t._v(" "+t._s(`${e.item.id}`)+" ")]}},{key:"cell(img)",fn:function(a){return[e("img",t._b({staticClass:"img-fluid",staticStyle:{"max-height":"50px","max-width":"50px"},attrs:{fluid:"",src:a.item.img,alt:a.item.img}},"img",t.mainProps,!1))]}},{key:"cell(title)",fn:function(e){return[t._v(" "+t._s(`${t.substringText(e.item.title,0,50)}`)+" ")]}},{key:"cell(author)",fn:function(e){return[t._v(" "+t._s(`${e.item.author_firstname} ${e.item.author_lastname}`)+" ")]}},{key:"cell(date)",fn:function(e){return[t._v(" "+t._s(`${e.item.date}`)+" ")]}},{key:"cell(status)",fn:function(t){return[t.item.favourite?e("i",{staticClass:"fa-solid fa-star",staticStyle:{color:"#dca818"}}):e("i",{staticClass:"fa-regular fa-star",staticStyle:{color:"#dca818"}})]}},{key:"cell(actions)",fn:function(a){return[e("b-row",[e("b-col",{attrs:{cols:"7"}},[e("i",{staticClass:"fa-solid fa-pen-to-square",staticStyle:{color:"#1860dc",cursor:"pointer"},on:{click:function(e){return t.getRowData(a.item.id)}}})]),e("b-col",{attrs:{cols:"1"}},[e("i",{staticClass:"fa-solid fa-trash",staticStyle:{color:"#da1010",cursor:"pointer"},on:{click:function(e){return t.showDeleteModal(a.item.id)}}})])],1)]}}])})],1)],1)],1),e("b-modal",{ref:"create-article-modal",staticStyle:{"background-color":"lightgreen"},attrs:{size:"xl","hide-footer":"",title:"New Article"}},[e("create-article-form",{on:{closeCreateModal:t.closeCreateModal,reloadDataTable:t.getArticleData,showSuccessAlert:t.showAlertCreate}})],1),e("b-modal",{ref:"edit-article-modal",staticStyle:{"background-color":"lightyellow"},attrs:{size:"xl","hide-footer":"",title:"Edit Article"}},[e("edit-article-form",{attrs:{articleId:t.articleId},on:{closeEditModal:t.closeEditModal,reloadDataTable:t.getArticleData,showSuccessAlert:t.showAlertUpdate}})],1),e("b-modal",{ref:"delete-article-modal",staticStyle:{"background-color":"lightcoral"},attrs:{size:"md","hide-footer":"",title:"Confirm Deletion"}},[e("delete-article-modal",{attrs:{articleId:t.articleId},on:{closeDeleteModal:t.closeDeleteModal,reloadDataTable:t.getArticleData,showDeleteAlert:t.showDeleteSuccessModal}})],1)],1)},m=[],f=a(44161),h=function(){var t=this,e=t._self._c;return e("div",[e("b-row",{staticClass:"text-center"},[e("b-col",[e("div",{staticClass:"filter-card p-3",class:{"bg-active-filter":t.totalIsActive,"bg-light":!t.totalIsActive},on:{click:t.totalArticlesIsActiveFilter}},[e("h6",[t._v("Total Articles")]),e("h4",[e("strong",[t._v(t._s(t.totalArticles))])])])]),e("b-col",[e("div",{staticClass:"filter-card p-3",class:{"bg-active-filter":t.activeIsActive,"bg-light":!t.activeIsActive},on:{click:t.activeArticlesIsActiveFilter}},[e("h6",{staticClass:"text-secondary"},[t._v("Active Articles")]),e("h4",[e("strong",[t._v(t._s(t.activeArticles))])])])])],1)],1)},v=[],p={name:"ArticleOverview",props:{totalArticles:Number,activeArticles:Number},data(){return{totalIsActive:!0,activeIsActive:!1}},methods:{totalArticlesIsActiveFilter(){this.totalIsActive=!0,this.activeIsActive=!1,this.$emit("totalArticlesIsActive")},activeArticlesIsActiveFilter(){this.totalIsActive=!1,this.activeIsActive=!0,this.$emit("activeArticleIsActive")}}},g=p,A=(0,n.Z)(g,h,v,!1,null,null,null),w=A.exports,C=function(){var t=this,e=t._self._c;return e("b-form",{staticClass:"mt-3"},[e("b-row",[e("b-row",[e("h4",{staticClass:"text-secondary"},[t._v("Author")])]),e("b-col",{attrs:{cols:"6"}},[e("b-form-group",{attrs:{id:"first-name",label:"First Name","label-for":"first-name"}},[e("b-form-input",{attrs:{id:"first-name",type:"text",placeholder:"First Name"},model:{value:t.article.author_firstname,callback:function(e){t.$set(t.article,"author_firstname",e)},expression:"article.author_firstname"}})],1)],1),e("b-col",{attrs:{cols:"6"}},[e("b-form-group",{attrs:{id:"last-name",label:"Last Name","label-for":"last-name"}},[e("b-form-input",{attrs:{id:"last-name",type:"text",placeholder:"Last Name"},model:{value:t.article.author_lastname,callback:function(e){t.$set(t.article,"author_lastname",e)},expression:"article.author_lastname"}})],1)],1)],1),e("b-row",{staticClass:"mt-3"},[e("b-row",[e("h4",{staticClass:"text-secondary"},[t._v("Title")])]),e("b-col",{attrs:{cols:"6"}},[e("b-form-group",{attrs:{id:"title",label:"Title","label-for":"title"}},[e("b-form-input",{attrs:{id:"title",type:"text"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1)],1),e("b-col",{attrs:{cols:"6"}},[e("b-form-group",{attrs:{id:"subtitle",label:"Subtitle","label-for":"subtitle"}},[e("b-form-input",{attrs:{id:"subtitle",type:"subtitle"},model:{value:t.article.subtitle,callback:function(e){t.$set(t.article,"subtitle",e)},expression:"article.subtitle"}})],1)],1)],1),e("b-row",{staticClass:"mt-5"},[e("b-row",[e("h4",{staticClass:"text-secondary"},[t._v("Text")])]),e("b-col",{attrs:{cols:"12"}},[e("b-form-textarea",{attrs:{id:"textarea-rows",placeholder:"Tall textarea",rows:"8"},model:{value:t.article.text,callback:function(e){t.$set(t.article,"text",e)},expression:"article.text"}})],1)],1),e("b-row",{staticClass:"mt-5"},[e("h4",{staticClass:"text-secondary"},[t._v("Details")])]),e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("div",[e("b-form-tags",{staticClass:"mb-2",attrs:{"no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function({tags:a,inputAttrs:l,inputHandlers:s,tagVariant:r,addTag:i,removeTag:o}){return[e("b-input-group",{staticClass:"mb-2"},[e("b-form-input",t._g(t._b({staticClass:"form-control",attrs:{placeholder:"New tag - Press enter to add"}},"b-form-input",l,!1),s)),e("b-input-group-append",[e("b-button",{attrs:{variant:"primary"},on:{click:function(t){return i()}}},[t._v("Add")])],1)],1),e("div",{staticClass:"d-inline-block",staticStyle:{"font-size":"1.5rem"}},t._l(a,(function(a){return e("b-form-tag",{key:a,staticClass:"mr-1",staticStyle:{"background-color":"green"},attrs:{title:a,variant:r},on:{remove:function(t){return o(a)}}},[t._v(t._s(a))])})),1)]}}]),model:{value:t.article.tags,callback:function(e){t.$set(t.article,"tags",e)},expression:"article.tags"}})],1)])],1),e("b-row",[e("b-col",{attrs:{cols:"4"}},[e("b-form-group",{attrs:{id:"date",label:"Date","label-for":"date"}},[e("b-form-input",{attrs:{id:"date",type:"date"},model:{value:t.article.date,callback:function(e){t.$set(t.article,"date",e)},expression:"article.date"}})],1)],1),e("b-col",{attrs:{cols:"4"}},[e("b-form-group",{attrs:{id:"link",label:"Link","label-for":"link"}},[e("b-form-input",{attrs:{id:"link",type:"text"},model:{value:t.article.link,callback:function(e){t.$set(t.article,"link",e)},expression:"article.link"}})],1)],1),e("b-col",{attrs:{cols:"4"}},[e("b-form-group",{attrs:{id:"img",label:"Image","label-for":"img"}},[e("b-form-input",{attrs:{id:"img",type:"text"},model:{value:t.article.img,callback:function(e){t.$set(t.article,"img",e)},expression:"article.img"}})],1)],1)],1),e("b-row",{staticClass:"mt-2"},[e("b-form-checkbox",{attrs:{id:"favourite",name:"article-favourite"},model:{value:t.article.favourite,callback:function(e){t.$set(t.article,"favourite",e)},expression:"article.favourite"}},[t._v(" Favourite ")])],1),e("b-row",{staticClass:"mt-4"},[e("b-col",{staticClass:"d-flex justify-content-start",attrs:{cols:"6"}},[e("b-button",{staticClass:"px-5",attrs:{variant:"primary"},on:{click:t.addNewArticle}},[t._v("Add Article")])],1),e("b-col",{staticClass:"d-flex justify-content-end",attrs:{cols:"6"}},[e("b-button",{attrs:{variant:"warning"},on:{click:t.triggerClose}},[t._v("Close")])],1)],1)],1)},x=[],_={name:"CreateArticleModal",data(){return{article:{}}},methods:{triggerClose(){this.$emit("closeCreateModal")},addNewArticle(){f.Z.post("http://localhost:3000/articles/",this.article).then((t=>{console.log(t.data),this.$emit("closeCreateModal"),this.$emit("reloadDataTable"),this.$emit("showSuccessAlert")})).catch((t=>{console.log(t)}))}}},k=_,y=(0,n.Z)(k,C,x,!1,null,null,null),D=y.exports,$=function(){var t=this,e=t._self._c;return e("b-form",{staticClass:"mt-3"},[e("b-row",[e("b-row",[e("h4",{staticClass:"text-secondary"},[t._v("Author")])]),e("b-col",{attrs:{cols:"6"}},[e("b-form-group",{attrs:{id:"first-name",label:"First Name","label-for":"first-name"}},[e("b-form-input",{attrs:{id:"first-name",type:"text",placeholder:"First Name"},model:{value:t.article.author_firstname,callback:function(e){t.$set(t.article,"author_firstname",e)},expression:"article.author_firstname"}})],1)],1),e("b-col",{attrs:{cols:"6"}},[e("b-form-group",{attrs:{id:"last-name",label:"Last Name","label-for":"last-name"}},[e("b-form-input",{attrs:{id:"last-name",type:"text",placeholder:"Last Name"},model:{value:t.article.author_lastname,callback:function(e){t.$set(t.article,"author_lastname",e)},expression:"article.author_lastname"}})],1)],1)],1),e("b-row",{staticClass:"mt-3"},[e("b-row",[e("h4",{staticClass:"text-secondary"},[t._v("Title")])]),e("b-col",{attrs:{cols:"6"}},[e("b-form-group",{attrs:{id:"title",label:"Title","label-for":"title"}},[e("b-form-input",{attrs:{id:"title",type:"text"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1)],1),e("b-col",{attrs:{cols:"6"}},[e("b-form-group",{attrs:{id:"subtitle",label:"Subtitle","label-for":"subtitle"}},[e("b-form-input",{attrs:{id:"subtitle",type:"subtitle"},model:{value:t.article.subtitle,callback:function(e){t.$set(t.article,"subtitle",e)},expression:"article.subtitle"}})],1)],1)],1),e("b-row",{staticClass:"mt-5"},[e("b-row",[e("h4",{staticClass:"text-secondary"},[t._v("Text")])]),e("b-col",{attrs:{cols:"12"}},[e("b-form-textarea",{attrs:{id:"textarea-rows",placeholder:"Tall textarea",rows:"8"},model:{value:t.article.text,callback:function(e){t.$set(t.article,"text",e)},expression:"article.text"}})],1)],1),e("b-row",{staticClass:"mt-5"},[e("h4",{staticClass:"text-secondary"},[t._v("Details")])]),e("b-row",[e("b-col",{attrs:{cols:"12"}},[e("div",[e("b-form-tags",{staticClass:"mb-2",attrs:{"no-outer-focus":""},scopedSlots:t._u([{key:"default",fn:function({tags:a,inputAttrs:l,inputHandlers:s,tagVariant:r,addTag:i,removeTag:o}){return[e("b-input-group",{staticClass:"mb-2"},[e("b-form-input",t._g(t._b({staticClass:"form-control",attrs:{placeholder:"New tag - Press enter to add"}},"b-form-input",l,!1),s)),e("b-input-group-append",[e("b-button",{attrs:{variant:"primary"},on:{click:function(t){return i()}}},[t._v("Add")])],1)],1),e("div",{staticClass:"d-inline-block",staticStyle:{"font-size":"1.5rem"}},t._l(a,(function(a){return e("b-form-tag",{key:a,staticClass:"mr-1",staticStyle:{"background-color":"green"},attrs:{title:a,variant:r},on:{remove:function(t){return o(a)}}},[t._v(t._s(a))])})),1)]}}]),model:{value:t.article.tags,callback:function(e){t.$set(t.article,"tags",e)},expression:"article.tags"}})],1)])],1),e("b-row",[e("b-col",{attrs:{cols:"4"}},[e("b-form-group",{attrs:{id:"date",label:"Date","label-for":"date"}},[e("b-form-input",{attrs:{id:"date",type:"date"},model:{value:t.article.date,callback:function(e){t.$set(t.article,"date",e)},expression:"article.date"}})],1)],1),e("b-col",{attrs:{cols:"4"}},[e("b-form-group",{attrs:{id:"link",label:"Link","label-for":"link"}},[e("b-form-input",{attrs:{id:"link",type:"text"},model:{value:t.article.link,callback:function(e){t.$set(t.article,"link",e)},expression:"article.link"}})],1)],1),e("b-col",{attrs:{cols:"4"}},[e("b-form-group",{attrs:{id:"img",label:"Image","label-for":"img"}},[e("b-form-input",{attrs:{id:"img",type:"text"},model:{value:t.article.img,callback:function(e){t.$set(t.article,"img",e)},expression:"article.img"}})],1)],1)],1),e("b-row",{staticClass:"mt-2"},[e("b-form-checkbox",{attrs:{id:"favourite",name:"article-favourite"},model:{value:t.article.favourite,callback:function(e){t.$set(t.article,"favourite",e)},expression:"article.favourite"}},[t._v(" Favourite ")])],1),e("b-row",{staticClass:"mt-4"},[e("b-col",{staticClass:"d-flex justify-content-start",attrs:{cols:"6"}},[e("b-button",{staticClass:"px-5",attrs:{variant:"primary"},on:{click:t.updateArticle}},[t._v("Update Article")])],1),e("b-col",{staticClass:"d-flex justify-content-end",attrs:{cols:"6"}},[e("b-button",{attrs:{variant:"warning"},on:{click:t.triggerClose}},[t._v("Close")])],1)],1)],1)},I=[],S={name:"CreateArticleModal",props:{articleId:Number},data(){return{article:{}}},mounted(){this.getCusomterByID()},methods:{triggerClose(){this.$emit("closeEditModal")},getCusomterByID(){f.Z.get(`http://localhost:3000/articles/${this.articleId}`).then((t=>{this.article=t.data})).catch((t=>{console.log(t)}))},updateArticle(){f.Z.put(`http://localhost:3000/articles/${this.articleId}`,this.article).then((t=>{console.log(t.data),this.$emit("closeEditModal"),this.$emit("reloadDataTable"),this.$emit("showSuccessAlert")})).catch((t=>{console.log(t)}))}}},M=S,T=(0,n.Z)(M,$,I,!1,null,"42b059de",null),F=T.exports,N=function(){var t=this,e=t._self._c;return e("div",[e("b-row",{staticClass:"mt-2 mb-3"},[e("h6",{staticClass:"text-secondary"},[t._v(" Are you sure you want to delete this article from your CRM? ")])]),e("b-row",{staticClass:"mt-2 mb-3"},[e("p",{staticClass:"text-danger"},[t._v(" This action is not reversible and may result in the loss if important data. ")])]),e("b-row",{staticClass:"mt-4"},[e("b-col",{staticClass:"d-flex justify-content-start",attrs:{cols:"6"}},[e("b-button",{attrs:{variant:"danger"},on:{click:t.removeArticleFromData}},[t._v("Delete Article")])],1),e("b-col",{staticClass:"d-flex justify-content-end",attrs:{cols:"6"}},[e("b-button",{attrs:{variant:"warning"},on:{click:t.triggerClose}},[t._v("Close")])],1)],1)],1)},E=[],Z={name:"DeleteArticleModal",props:{articleId:Number},methods:{triggerClose(){this.$emit("closeDeleteModal")},removeArticleFromData(){f.Z.delete(`http://localhost:3000/articles/${this.articleId}`).then((()=>{this.$emit("reloadDataTable"),this.$emit("showDeleteAlert"),this.$emit("closeDeleteModal")})).catch((t=>{console.log(t)}))}}},H=Z,j=(0,n.Z)(H,N,E,!1,null,null,null),L=j.exports,O={name:"DataTable",components:{ArticleOverview:w,CreateArticleForm:D,EditArticleForm:F,DeleteArticleModal:L},data(){return{mainProps:{blank:!0,blankColor:"#777",width:110,height:85},fields:[{key:"id",label:"Id",sortable:!1},{key:"img",label:"Img",sortable:!1},{key:"title",label:"Title",sortable:!1},{key:"author",label:"Author",sortable:!1},{key:"status",label:"",sortable:!1},{key:"date",label:"Date",sortable:!1},"actions"],items:[],numberOfArticles:0,activeArticles:0,activeArticlesData:[],articleId:0,companySearchTerm:"",tableHeader:"",showSuccessAlertCreate:!1,showSuccessAlertEdit:!1,showSuccessAlertDelete:!1,alertMessage:""}},mounted(){this.getArticleData()},methods:{showCreateModal(){this.$refs["create-article-modal"].show()},closeCreateModal(){this.$refs["create-article-modal"].hide()},getArticleData(){f.Z.get("http://localhost:3000/articles/").then((t=>{this.tableHeader="Total Article",this.items=t.data,this.numberOfArticles=t.data.length,this.activeArticlesData=t.data.filter((t=>t.favourite)),this.activeArticles=this.activeArticlesData.length})).catch((t=>{console.log(t)}))},getRowData(t){this.articleId=t,this.$refs["edit-article-modal"].show()},closeEditModal(){this.$refs["edit-article-modal"].hide()},setFilterTotalIsActive(){this.tableHeader="Total Articles",this.getArticleData()},setFilterActiveIsActive(){this.tableHeader="Recent Articles",this.items=this.activeArticlesData},showAlertCreate(){this.showSuccessAlertCreate=!0,this.alertMessage="Article was created successfully!"},showAlertUpdate(){this.showSuccessAlertEdit=!0,this.alertMessage="Article was updated successfully",setInterval((()=>{this.showSuccessAlertEdit=!1}),5e3)},showDeleteModal(t){this.articleId=t,this.$refs["delete-article-modal"].show()},closeDeleteModal(){this.$refs["delete-article-modal"].hide()},showDeleteSuccessModal(){this.showSuccessAlertDelete=!0,this.alertMessage="Article was deleted successfully!"},substringText(t,e,a){return t.length>a?t.substring(e,a)+"...":t}}},z=O,P=(0,n.Z)(z,b,m,!1,null,"3e2675d0",null),R=P.exports,B={name:"PrivateView",components:{HeaderBar:d,DataTable:R},beforeDestroy(){localStorage.removeItem("password"),console.log("logout")}},U=B,V=(0,n.Z)(U,l,s,!1,null,null,null),q=V.exports}}]);
//# sourceMappingURL=802.e281b15a.js.map