"use strict";(self["webpackChunkgabrisca"]=self["webpackChunkgabrisca"]||[]).push([[470],{1470:function(t,a,e){e.r(a),e.d(a,{default:function(){return _}});var r=function(){var t=this,a=t._self._c;return a("div",{staticClass:"payment"},[a("CreditCardView")],1)},s=[],i=function(){var t=this,a=t._self._c;return a("div",{staticClass:"c_card"},[a("b-form",{staticClass:"position-relative p-3",on:{submit:function(a){return a.preventDefault(),t.onSubmit.apply(null,arguments)}}},[a("div",{staticClass:"card-form"},[a("div",{staticClass:"card-list"},[a("div",{staticClass:"card-item",class:{"-active":t.isCardFlipped}},[a("div",{staticClass:"card-item__side -front"},[a("div",{ref:"focusElement",staticClass:"card-item__focus",class:{"-active":t.focusElementStyle},style:t.focusElementStyle}),a("div",{staticClass:"card-item__cover"},[a("img",{staticClass:"card-item__bg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.currentCardBackground+".jpeg"}})]),a("div",{staticClass:"card-item__wrapper"},[a("div",{staticClass:"card-item__top"},[a("img",{staticClass:"card-item__chip",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/chip.png"}}),a("div",{staticClass:"card-item__type"},[a("transition",{attrs:{name:"slide-fade-up"}},[t.getCardType?a("img",{key:t.getCardType,staticClass:"card-item__typeImg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.getCardType+".png",alt:""}}):t._e()])],1)]),a("label",{ref:"cardNumber",staticClass:"card-item__number",attrs:{for:"cardNumber"}},["amex"===t.getCardType?a("div",t._l(t.amexCardMask,(function(e,r){return a("span",{key:r},[a("transition",{attrs:{name:"slide-fade-up"}},[r>4&&r<14&&t.cardNumber.length>r&&""!==e.trim()?a("div",{staticClass:"card-item__numberItem"},[t._v(" * ")]):t.cardNumber.length>r?a("div",{key:r,staticClass:"card-item__numberItem",class:{"-active":""===e.trim()}},[t._v(" "+t._s(t.cardNumber[r])+" ")]):a("div",{key:r+1,staticClass:"card-item__numberItem",class:{"-active":""===e.trim()}},[t._v(" "+t._s(e)+" ")])])],1)})),0):a("div",t._l(t.otherCardMask,(function(e,r){return a("span",{key:r},[a("transition",{attrs:{name:"slide-fade-up"}},[r>4&&r<15&&t.cardNumber.length>r&&""!==e.trim()?a("div",{staticClass:"card-item__numberItem"},[t._v(" * ")]):t.cardNumber.length>r?a("div",{key:r,staticClass:"card-item__numberItem",class:{"-active":""===e.trim()}},[t._v(" "+t._s(t.cardNumber[r])+" ")]):a("div",{key:r+1,staticClass:"card-item__numberItem",class:{"-active":""===e.trim()}},[t._v(" "+t._s(e)+" ")])])],1)})),0)]),a("div",{staticClass:"card-item__content"},[a("label",{ref:"cardName",staticClass:"card-item__info",attrs:{for:"cardName"}},[a("div",{staticClass:"card-item__holder"},[t._v("Card Holder")]),a("transition",{attrs:{name:"slide-fade-up"}},[t.cardName.length?a("div",{key:"1",staticClass:"card-item__name"},[a("transition-group",{attrs:{name:"slide-fade-right"}},t._l(t.cardName.replace(/\s\s+/g," "),(function(e,r){return r===r?a("span",{key:r+1,staticClass:"card-item__nameItem"},[t._v(t._s(e))]):t._e()})),0)],1):a("div",{key:"2",staticClass:"card-item__name"},[t._v(" Full Name ")])])],1),a("div",{ref:"cardDate",staticClass:"card-item__date"},[a("label",{staticClass:"card-item__dateTitle",attrs:{for:"cardMonth"}},[t._v("Expires")]),a("label",{staticClass:"card-item__dateItem",attrs:{for:"cardMonth"}},[a("transition",{attrs:{name:"slide-fade-up"}},[t.cardMonth?a("span",{key:t.cardMonth},[t._v(t._s(t.cardMonth))]):a("span",{key:"2"},[t._v("MM")])])],1),t._v(" / "),a("label",{staticClass:"card-item__dateItem",attrs:{for:"cardYear"}},[a("transition",{attrs:{name:"slide-fade-up"}},[t.cardYear?a("span",{key:t.cardYear},[t._v(t._s(String(t.cardYear).slice(2,4)))]):a("span",{key:"2"},[t._v("YY")])])],1)])])])]),a("div",{staticClass:"card-item__side -back"},[a("div",{staticClass:"card-item__cover"},[a("img",{staticClass:"card-item__bg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.currentCardBackground+".jpeg"}})]),a("div",{staticClass:"card-item__band"}),a("div",{staticClass:"card-item__cvv"},[a("div",{staticClass:"card-item__cvvTitle"},[t._v("CVV")]),a("div",{staticClass:"card-item__cvvBand"},t._l(t.cardCvv,(function(e,r){return a("span",{key:r},[t._v(" * ")])})),0),a("div",{staticClass:"card-item__type"},[t.getCardType?a("img",{staticClass:"card-item__typeImg",attrs:{src:"https://raw.githubusercontent.com/muhammederdem/credit-card-form/master/src/assets/images/"+t.getCardType+".png"}}):t._e()])])])])]),a("div",{staticClass:"card-form__inner"},[a("div",{staticClass:"card-input"},[a("label",{staticClass:"card-input__label",attrs:{for:"cardNumber"}},[t._v("Card Number")]),a("input",{directives:[{name:"mask",rawName:"v-mask",value:t.generateCardNumberMask,expression:"generateCardNumberMask"},{name:"model",rawName:"v-model",value:t.cardNumber,expression:"cardNumber"}],staticClass:"card-input__input",attrs:{type:"text",id:"cardNumber","data-ref":"cardNumber",autocomplete:"off"},domProps:{value:t.cardNumber},on:{focus:t.focusInput,blur:t.blurInput,input:function(a){a.target.composing||(t.cardNumber=a.target.value)}}})]),a("div",{staticClass:"card-input"},[a("label",{staticClass:"card-input__label",attrs:{for:"cardName"}},[t._v("Card Holders")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardName,expression:"cardName"}],staticClass:"card-input__input",attrs:{type:"text",id:"cardName","data-ref":"cardName",autocomplete:"off"},domProps:{value:t.cardName},on:{focus:t.focusInput,blur:t.blurInput,input:function(a){a.target.composing||(t.cardName=a.target.value)}}})]),a("div",{staticClass:"card-form__row"},[a("div",{staticClass:"card-form__col"},[a("div",{staticClass:"card-form__group"},[a("label",{staticClass:"card-input__label",attrs:{for:"cardMonth"}},[t._v("Expiration Date")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.cardMonth,expression:"cardMonth"}],staticClass:"card-input__input -select",attrs:{id:"cardMonth","data-ref":"cardDate"},on:{focus:t.focusInput,blur:t.blurInput,change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.cardMonth=a.target.multiple?e:e[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Month")]),t._l(12,(function(e){return a("option",{key:e,attrs:{disabled:e<t.minCardMonth},domProps:{value:e<10?"0"+e:e}},[t._v(" "+t._s(e<10?"0"+e:e)+" ")])}))],2),a("select",{directives:[{name:"model",rawName:"v-model",value:t.cardYear,expression:"cardYear"}],staticClass:"card-input__input -select",attrs:{id:"cardYear","data-ref":"cardDate"},on:{focus:t.focusInput,blur:t.blurInput,change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.cardYear=a.target.multiple?e:e[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Year")]),t._l(12,(function(e,r){return a("option",{key:e,domProps:{value:r+t.minCardYear}},[t._v(" "+t._s(r+t.minCardYear)+" ")])}))],2)])]),a("div",{staticClass:"card-form__col -cvv"},[a("div",{staticClass:"card-input"},[a("label",{staticClass:"card-input__label",attrs:{for:"cardCvv"}},[t._v("CVV")]),a("input",{directives:[{name:"mask",rawName:"v-mask",value:"####",expression:"'####'"},{name:"model",rawName:"v-model",value:t.cardCvv,expression:"cardCvv"}],staticClass:"card-input__input",attrs:{type:"text",id:"cardCvv",maxlength:"4",autocomplete:"off"},domProps:{value:t.cardCvv},on:{focus:function(a){return t.flipCard(!0)},blur:function(a){return t.flipCard(!1)},input:function(a){a.target.composing||(t.cardCvv=a.target.value)}}})])])]),a("b-button",{ref:"submit",staticClass:"card-form__button",attrs:{type:"submit",disabled:t.busy}},[t._v(" Submit ")]),a("b-overlay",{attrs:{show:t.busy,"no-wrap":""},on:{shown:t.onShown,hidden:t.onHidden},scopedSlots:t._u([{key:"overlay",fn:function(){return[t.processing?a("div",{staticClass:"text-center p-4 bg-primary text-light rounded"},[a("b-icon",{attrs:{icon:"cloud-upload","font-scale":"4"}}),a("div",{staticClass:"mb-3"},[t._v("Processing...")]),a("b-progress",{staticClass:"mx-n4 rounded-0",attrs:{min:"1",max:"20",value:t.counter,variant:"success",height:"3px"}})],1):a("div",{ref:"dialog",staticClass:"text-center p-3",attrs:{tabindex:"-1",role:"dialog","aria-modal":"false","aria-labelledby":"form-confirm-label"}},[a("p",[a("strong",{attrs:{id:"form-confirm-label"}},[t._v("Are you sure?")])]),a("div",{staticClass:"d-flex"},[a("b-button",{staticClass:"mr-3",attrs:{variant:"outline-danger"},on:{click:t.onCancel}},[t._v(" Cancel ")]),a("b-button",{attrs:{variant:"outline-success"},on:{click:t.onOK}},[t._v("OK")])],1)])]},proxy:!0}])})],1)])])],1)},c=[],n={name:"CreditCardComp",data(){return{currentCardBackground:Math.floor(25*Math.random()+1),cardName:"",cardNumber:"",cardMonth:"",cardYear:"",cardCvv:"",minCardYear:(new Date).getFullYear(),amexCardMask:"#### ###### #####",otherCardMask:"#### #### #### ####",cardNumberTemp:"",isCardFlipped:!1,focusElementStyle:null,isInputFocused:!1,busy:!1,processing:!1,counter:1,interval:null}},beforeDestroy(){this.clearInterval()},mounted(){this.cardNumberTemp=this.otherCardMask,document.getElementById("cardNumber").focus()},computed:{getCardType(){let t=this.cardNumber,a=new RegExp("^4");return null!=t.match(a)?"visa":(a=new RegExp("^(34|37)"),null!=t.match(a)?"amex":(a=new RegExp("^5[1-5]"),null!=t.match(a)?"mastercard":(a=new RegExp("^6011"),null!=t.match(a)?"discover":(a=new RegExp("^9792"),null!=t.match(a)?"troy":"visa"))))},generateCardNumberMask(){return"amex"===this.getCardType?this.amexCardMask:this.otherCardMask},minCardMonth(){return this.cardYear===this.minCardYear?(new Date).getMonth()+1:1}},watch:{cardYear(){this.cardMonth<this.minCardMonth&&(this.cardMonth="")}},methods:{flipCard(t){this.isCardFlipped=t},focusInput(t){this.isInputFocused=!0;let a=t.target.dataset.ref,e=this.$refs[a];this.focusElementStyle={width:`${e.offsetWidth}px`,height:`${e.offsetHeight}px`,transform:`translateX(${e.offsetLeft}px) translateY(${e.offsetTop}px)`}},blurInput(){let t=this;setTimeout((()=>{t.isInputFocused||(t.focusElementStyle=null)}),300),t.isInputFocused=!1},clearInterval(){this.interval&&(clearInterval(this.interval),this.interval=null)},onShown(){this.$refs.dialog.focus()},onHidden(){this.$refs.submit.focus()},onSubmit(){this.processing=!1,this.busy=!0},onCancel(){this.busy=!1},onOK(){this.counter=1,this.processing=!0,this.clearInterval(),this.interval=setInterval((()=>{this.counter<20?this.counter=this.counter+1:(this.clearInterval(),this.$nextTick((()=>{this.busy=this.processing=!1})))}),350)}}},d=n,l=e(1001),o=(0,l.Z)(d,i,c,!1,null,"2cd9044e",null),u=o.exports,m={name:"PaymentView",components:{CreditCardView:u}},p=m,v=(0,l.Z)(p,r,s,!1,null,null,null),_=v.exports}}]);
//# sourceMappingURL=470.40a8a14a.js.map